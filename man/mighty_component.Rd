% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mighty_component.R
\name{mighty_component}
\alias{mighty_component}
\title{Mighty standard component}
\description{
Class for a generic mighty standard component.

In the mighty framework, a "component" is a code template that processes
input data and returns a modified version with new columns or rows.
Standard components share a common structure and roxygen-like documentation pattern,
facilitating their use inside mighty.
}
\details{
Templates are \code{character} vectors of R code that are interpreted.
Dynamic use of variables etc. are supported using the \href{https://mustache.github.io}{mustache}
framework. Dynamic parameters are specified using \code{{{ variable_name }}}.
\subsection{Documentation}{

A template is required to be documented with the following tags similar to when
documenting functions using roxygen2:\tabular{lll}{
   Tag \tab Description \tab Example \cr
   \verb{@title} \tab Title of the component \tab \verb{@title My component} \cr
   \verb{@description} \tab Description of the component \tab \verb{@description text text} \cr
   \verb{@param} \tab Specifies input used to render the component \tab \verb{@param variable new var} \cr
   \verb{@type} \tab Specifies type: predecessor, derivation, row \tab \verb{@type derivation} \cr
   \verb{@depends} \tab Required input variable (repeat if several) \tab \verb{@depends .self USUBJID} \cr
   \verb{@outputs} \tab Variables created (repeat if several) \tab \verb{@outputs NEWVAR} \cr
}

}

\subsection{Conventions}{

A template for a standard components follow these conventions:
\enumerate{
\item The input data set is always called \code{.self}.
\item Additional parameters used to render the template into R code are documented with the \verb{@param} tag.
\item The template ends with creating a modified version of \code{.self}.
\item Template documented with the roxygen-like tags above
}
}

\subsection{Example}{

Below is an example of a mighty component template that
creates a new dynamic variable \code{variable} as twice the value
of the dynamic input \code{x}, that should already by in the input data set \code{.self}.

\if{html}{\out{<div class="sourceCode r">}}\preformatted{#' Title for my component
#' @description
#' A more in depth description of what is being done
#'
#' @param variable dynamic output if applicable
#' @param x some other input to the component
#' @type derivation
#' @depends .self \{\{ x \}\}
#' @outputs \{\{ variable \}\}
.self <- .self |>
  dplyr::mutate(
    \{\{ variable \}\} = 2 * \{\{ x \}\}
  )
}\if{html}{\out{</div>}}

When rendered with parameters \code{variable = "A"} and \code{x = "B"}
the rendered code used in mighty becomes:

\if{html}{\out{<div class="sourceCode r">}}\preformatted{.self <- .self |>
  dplyr::mutate(
    A = 2 * B
  )
}\if{html}{\out{</div>}}
}
}
\seealso{
\code{\link[=get_standard]{get_standard()}}, \link{mighty_component_rendered}
}
\section{Active bindings}{
\if{html}{\out{<div class="r6-active-bindings">}}
\describe{
\item{\code{id}}{Component ID}

\item{\code{title}}{Title for the component.}

\item{\code{description}}{Description of the component.}

\item{\code{code}}{The code block of the component.}

\item{\code{template}}{The complete template.}

\item{\code{type}}{The type of the component. Can be one of predecessor, derivation, row.}

\item{\code{depends}}{Data.frame listing all the components dependencies.}

\item{\code{outputs}}{List of the new columns created by the component.}

\item{\code{params}}{Data.frame listing parameters that need to be supplied when rendering the component.}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-mighty_component-new}{\code{mighty_component$new()}}
\item \href{#method-mighty_component-print}{\code{mighty_component$print()}}
\item \href{#method-mighty_component-render}{\code{mighty_component$render()}}
\item \href{#method-mighty_component-document}{\code{mighty_component$document()}}
\item \href{#method-mighty_component-tool}{\code{mighty_component$tool()}}
\item \href{#method-mighty_component-clone}{\code{mighty_component$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-mighty_component-new"></a>}}
\if{latex}{\out{\hypertarget{method-mighty_component-new}{}}}
\subsection{Method \code{new()}}{
Create standard component from template.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{mighty_component$new(template, id)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{template}}{\code{character} template code. See details for how to format.}

\item{\code{id}}{\code{character} ID of the component. Either name of standard or path to local.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-mighty_component-print"></a>}}
\if{latex}{\out{\hypertarget{method-mighty_component-print}{}}}
\subsection{Method \code{print()}}{
Print method displaying the component information.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{mighty_component$print()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
(\code{invisible}) self
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-mighty_component-render"></a>}}
\if{latex}{\out{\hypertarget{method-mighty_component-render}{}}}
\subsection{Method \code{render()}}{
Render component with supplied values.
Supports mustache templates and uses \code{whisker::whisker.render()}.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{mighty_component$render(...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{...}}{Parameters used to render the template.
Must be named, and depends on the template.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Object of class \link{mighty_component_rendered}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-mighty_component-document"></a>}}
\if{latex}{\out{\hypertarget{method-mighty_component-document}{}}}
\subsection{Method \code{document()}}{
Create standard documentation.
\strong{TODO: Implement in #18}
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{mighty_component$document()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-mighty_component-tool"></a>}}
\if{latex}{\out{\hypertarget{method-mighty_component-tool}{}}}
\subsection{Method \code{tool()}}{
\code{ellmer::tool()} representation of the component that can easily be used with LLMs.

What the tool returns depends on the chosen method:
\itemize{
\item \code{call}: A nested \code{list} with \strong{id} and \strong{params}.
\item \code{render}: The rendered standard component. output from \code{mighty_component$render()}.
\item \code{eval}: The result of evaluating the rendered standard component. Output from \code{mighty_component_rendered$eval()}.
}
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{mighty_component$tool(method = c("call", "render", "eval"))}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{method}}{What should the created tool return? See Description for details.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Object created with \code{ellmer::tool()}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-mighty_component-clone"></a>}}
\if{latex}{\out{\hypertarget{method-mighty_component-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{mighty_component$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
